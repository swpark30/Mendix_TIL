# module 10 



## 모바일화

- 레이아웃은 간단하게 할 필요가 있다.
- 일부 위젯은 모바일 사용에 더 적합하다.
  - 데이터 그리드는 여러 열과 여러 검색 필드에 의존하기 때문에 적합하지 않다.
  - List view는 객체 목록을 표시하기 위한 더 간단하고 간결하며 반응성이 뛰어나다.
- 모바일 앱 구현을 하기 위해 모바일 앱 스토어에 앱을 게시할 것인지, 브라우저 기반이어야 하는지에 따라 백본으로 사용할 기본 기술을 결정할 수 있다.
- 앱 스토어 기반 접근 방식
  - 네이티브 모바일
    - 설치된 모바일 장치에서 기본적으로 실행되는 앱을 생성한다.
    - 더 많은 모바일 기능에 액세스할 수 있지만 개발하려면 더 많은 지식이 필요하다.
  - 하이브리드 웹 앱
    - 웹 기술에서 실행되므로 네이티브 앱보다 기능은 떨어지지만 구축하기 쉽다.
    - Pro 9 부터 하이브리드 지원이 더 이상 사용되지 않고 Progressive Web Apps(PWA)로 대체되었다
- PWA
  - 주변에 네이티브 쉘이 있는 웹 앱 기술이다.
  - PWA앱은 모바일 장치의 홈 화면에 설치되고 오프라인으로도 실행할 수 있고, 브라우저 창에서 실행되지 않는다는 점에서 기본 앱처럼 작동하지만 웹 앱만큼 유연하고 유지 관리가 쉽다.
  - 주요 속성 3가지
    - Installable (설치 가능)
      - PWA를 열면 홈 화면에 추가하라는 메시지가 표시된다.
      - 수락하면 홈 화면에 아이콘과 함께 설치된다.
      - 앱을 실행하면 기본 설치된 브라우저에서 실행되지만 브라우저 표시줄과 앱 자체는 숨겨저 독립 실행형 네이티브 앱과 같은 모습을 한다.
    - Reliable (믿을 수 있는)
      - 오프라인 또는 부분적 오프라인으로 작동할 수 있다.
      - 인터넷에 연결되어 있지 않아도 앱이 설치되면 오프라인으로 실행할 수 있다.
    - Capable (유능한)
      - 탐색, 전화 걸기 또는 사진 촬영과 같은 장치 기능을 활용할 수 있다.
      - 일부 브라우저에서는 블루투스나 NFC와 같은 기능을 사용할 수도 있다.
      - 브라우저에서 지원하는 기능에 따라 더 고급 기능을 사용할 수 있다.
- 반응형 웹 앱
  - 기기 크기에 맞게 조정되기 때문에 보기 좋고 모든 기기에서 작동하지만 모바일에 최적화되어 있지 않고 인터넷 연결이 필요하다.



## 모바일 웹 오프라인 탐색 프로필 만들기

- 오프라인 PWA는 IOS에서 지원되지 않는다.

1.  App Explorer의 Navigation을 연다.
2. Application title을 LearnNow로 바꾼다.
3. Add navigation profile 버튼을 누르고 Phone web을 고르고 확인을 누른다.
4. Progressive Web App란에 체크박스 3개 전부 체크한다.
5. 이러한 구성은 기본 홈페이지를 구성하는데 필요하다. Select를 누르고 TrainingEvent_Overview_Mobile이라는 이름으로 새 페이지를 만든다.
6. 페이지 만드는 창에서 Phone(web)옵션을 고른다.
7. 사이드 메뉴에서 Lists를 골라주고 List Double Line 레이아웃을 선택한다.
8.  navigation layout은 Phone_Topbar로 설정해준다.
9. 확인버튼을 눌러 페이지 만드는것을 완료한다.



### 모바일 전용 페이지 구성

1. 모바일 페이지에서는 앱 상단에 제목이 표시되기 때문에 항상 설정해주는 것이 중요하다. 속성 창에서 페이지 제목을 Training Events로 설정한다.
2. 페이지에 동적 정보를 표시하기 위해 List view에 맞는 엔티티를 선택해준다.
3. 교육 이벤트 목록을 보려면 TrainingEvent엔티티를 선택한다.
4. 자동 채우기를 선택하면 원래 레이아웃이 교육 이벤트 엔티티의 속성 텍스트 위젯으로 바뀐다.
5. 텍스트 위젯 내용을 알맞게 바꿔주고 List view의 제약 조건 검색을 제거해준다.
6. 디자인 모드로 전환하고 페이지를 봐본다.



## 나노플로우

- 모바일 페이지를 생성할 때 마이크로플로우 말고도 나노플로우를 사용할 수 있다.
- 나노플로우는 마이크로플로우와 유사하지만 나노플로우는 모바일에 대한 몇 가지 특정 이점이 있다.
- 브라우저/기기에서 직접 실행되고 오프라인 앱에서도 사용할 수 있다.
- 대부분의 작업이 장치에서 직접 실행되므로 서버에서 액세스 할 필요가 없어서 속도 이점이 있다.
- 오프라인 앱에서 작동하는 애플리케이션 로직을 모델링할 수 있도록 하기 때문에 오프라인 애플리케이션을 우선적으로 염두에 두고 설계되었다.
- 모든 데이터베이스 관련 작업은 로컬 오프라인 데이터베이스에서 실행되므로 오프라인 앱의 나노플로우는 빠르다.
- 나노플로우와 마이크로플로우가 생성되고 실행되는 방식에는 약간의 차이가 있다. 
- 마이크로플로우와 나노플로우는 모두 BPMN을 기반으로 한다. 
- 마이크로플로우를 구성하는 데 사용되는 주요 요소는 나노플로우의 요소와 유사하다. 
- 마이크로플로우와 나노플로우에서 사용할 수 있는 활동 유형에는 차이가 있다.
- 마이크로플로우와 나노플로우에서 일부 작업은 서로 사용할 수 없다.
- 나노플로우에서는 단계별 디버깅을 할 수 없다. 대안으로 Studio Pro의 콘솔에 표시될 나노플로우 내부에서 로그 메시지를 사용할 수 있다.





### 교육 이벤트에 지리적 위치 추가

1. 주소 텍스트 위젯 아래에 버튼을 추가하고 렌더링을 Link로 구성하고 이름을 제거하고 맵 마커를 추가한다.
2. 클릭할때 나노플로우를 불러오게 한다.
3. 나노플로우가 없으면 새로운 나노플로우를 만들어준다.
   - 이름 : ACT_TrainingEvent_ShowLocation
4. 새로 만든 나노플로우를 연다.
5. External activities 탭에서 Open Map을 나노플로우에 추가한다.
6. 마이크로플로우 표현식처럼 Location 인수를 $TrainingEvent/MyFirstModule.TrainingEvent_Location/MyFirstModule.Location/Address 로 설정한다.
7. 반환값을 아니요로 설정하고 확인을 눌러 창을 닫는다.



### 모바일 소셜 채널을 통한 정보 공유

1. TrainingEvents_Overview_Mobile 페이지를 열고 코스 제목 위젯 위에 새 버튼을 추가한다.
2. 제목 삭제하고 alt 아이콘을 추가하고 렌더링을 Link로 변경한다.
3. 클릭시 새 나노플로우를 호출하도록 한다.
   - 이름 : ACT_TrainingEvent_Share
4. Appearances 탭을 클릭하고 Align'self를 Right로 설정한다.
5. Share action을 추가하고 Url을 'https://academy.mendix.com/link/path/31/Become-a-Rapid-Developer/{Id}' 로 설정한다.
   - 작은 따옴표를 잊으면 안된다.
6. 텍스트를 'Check out the offerings of Mendix Academy' 로 변경하고 제목도 'Mendix Academy'로 변경한다.
7. 반환값 사용을 아니요로 설정하고 확인을 눌러 창을 닫는다.



### 보안 업데이트

1. 모듈 보안으로 가서 페이지 액세스에서 관리자 및 교육생에게 새 모바일 페이지에 대한 액세스 권한을 준다.
2. 나노플로우 액세스 탭에서 교육생에게 나노플로우 권한을 준다.
3. 엔티티 액세스 탭에서 교육생에게 Location Address에 대한 액세스 권한을 준다. (이 권한을 주지 않으면 나노플로우가 제대로 작동하지 않는다.)



### Publish

1. publish를 클릭하면 앱은 해당 커밋을 기반으로 무료 앱용 Mendix 샌드박스 환경에서 자동으로 커밋되고 시작된다.
2. 반응형 웹 모드에서 앱을 보면 프로덕션 보안때문에 로그인을 해야한다.
3. App Security를 열고 Demo users 탭으로 이동하여 관리자 데모역할을 더블클릭하여 속성 창을 띄운다.
4. 클립보드에 암호 복사라는 하이퍼링크를 누른다.
5. demo_administrator가 아이디가 되고 하이퍼링크로 누른 것이 비밀번호가 된다.
6. 클라우드로 배포한거라 데이터가 없다 그러므로 테스트 데이터를 추가한다.
7. View App 옆에 드롭다운을 눌러 장치에서 보기를 선택한다.
8. 팝업 창아 나타나고 프로필 선택에서 모바일 웹 오프라인을 선택하고 핸드폰으로 QR코드를 스캔한다.
9. 앱 기본 브라우저에 드로되면 화면 하단에 Add LearnNow to Home screen과 같은 막대가 나타나야 한다.

