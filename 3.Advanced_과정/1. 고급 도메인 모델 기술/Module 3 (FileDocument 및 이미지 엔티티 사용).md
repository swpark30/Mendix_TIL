## FileDocument 및 이미지 엔티티 사용



### FileDocument entity

- 애플리케이션에서 파일을 사용하고 싶을 때마다 FileDocument 엔티티를 사용할 수 있다.
- 지정된 파일 서버에 문서와 이미지를 저장하고 다운로드하고 애플리케이션에 표시할 수 있는 동작이 있다.
  - Name : 업로드된 파일의 파일 이름을 보유하거나 문서가 생성될 때 설정된다.
  - DeleteAfterDownload(Boolean) : true로 설정하면 브라우저에서 파일을 다운로드한 후 파일이 삭제된다.
  - Contents(Binary) : 파일을 다루는 Import Mapping에 사용할 수 있다.
  - HasContents(Boolean) : 첨부된 파일 내용이 있는 경우 이 값이 true가 된다.
- 파일 콘텐츠는 콘텐츠 속성에 저장되지 않고 앱 서버의 파일 시스템에 저장된다.
  - Amazon S3같은 외부 데이터 저장소에 파일 콘텐츠를 저장할 수도 있다.
  - horizontal scaling을 사용하는 경우 클러스터의 모든 서버에서 파일 콘텐츠를 사용할 수 있도록 하려면 외부 파일 저장소를 사용해야한다.



### Image entity

- 이미지 엔티티에는 썸네일 경로를 저장하기 위한 하나의 추가 특성이 있다.

  - PublicThumbnailPath : 자동 생성된 썸네일의 경로를 포함한다.

- Image uploader

  - 객체가 만들어지지 않았으면 uploader가 활성화 되지 않는다.

  

### 공통 내용

- 사용법
  - 시스템 모듈의 일부이므로 변경할 수 없다.
- 목적
  - 목정에 따라 문서와 이미지를 분할하는 것 외에도 문서와 이미지에 추가 정보 또는 추가 데이터를 추가할 수 있다.
    - 예) 로고는 Team 엔티티와 연결, ProfilePicture은 Person엔티티와 연결된다.
- 보안
  - 상속을 사용하면 보다 엄격하고 정확하게 보안을 설정할 수 있다.
  - 용도와 관련된 도메인 모델에 새 엔티티를 추가하면 영향을 받는 모듈의 모듈 Role을 사용할 수 있다.
  - 이미지를 직접 사용하는 경우, 관리자 및 사용자 모듈 Role만 구성에 사용할 수 있으며 보안 수준에서 문서 유형을 구분하는 것은 어렵다.
- 사용하는 가장 좋은 방법은 관련 모듈에서 각 목적에 다핸 자식화를 만드는 것이다.
- 문서를 쉽게 구별하고 사용하고 보호할 수 있다.