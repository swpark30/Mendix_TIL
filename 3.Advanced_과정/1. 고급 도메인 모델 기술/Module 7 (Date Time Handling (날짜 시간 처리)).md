## Date Time Handling (날짜 시간 처리)



### 날짜/시간 속성

- Mendix 플랫폼 내에서 날짜 및 시간 값을 저장하는데 사용된다.
- 이 요소들은 입력 위젯 구성 및 마이크로플로우의 변경 사항에 따라 설정된다.
- Localize
  - 값을 현지화하는 옵션
  - 기본적으로 켜져있으며 DateTime 속성이 앱의 nanoflow에서 사용될 때 브라우저의 시간대를 통합하는 DateTime stamp로 형식이 지정된다.
  - 이걸 끄면 UTC값이 표시된다. (다른시간대를 선택해도 항상 동일한 값으로 보인다.)
  - ex) UTC-6인 사용자의 2020년 7월 11일
    - 현지화가 켜져있으면 07/11/2020 12:00AM으로 표시 
    - 이 값이 UTC 07/11/2020 06:00AM에 저장된다.
    - UTC+4인 사용자가 이 값을 보면 07/11/2020 10:00AM으로 표시된다.



### 시간대 설정

- 특정 시간대를 구성할 수 있는 위치와 이러한 시간대가 사용되는 경우
- 시간대를 구성하면 XPath나 마이크로플로우 표현식에서 날짜 비교를 위해 앱 서버에서 시간대가 사용된다.
- 모델에서 시간대는 세 위치에서 구성할 수 있다
  - User : 사용자에 대한 시간대 설정은 이 사용자에 대해 수행되는 시간대 작업을 정의한다.
  - project : 기본 시간대. 설정하면 설정된 시간대가 없는 사용자에게 적용되는 시간대.
  - Scheduled events : 예약된 이벤트 활동이 작동하는 시간대를 정의한다.
- 이 시간대는 응용 프로그램 서버에서 DateTime 값을 처리할 때 사용된다.



### fallback mechanism (대체 메커니즘)

- 플랫폼은 클라이언트 브라우저에서 보고된 UTC의 브라우저 오프셋을 기반으로 DateTime 값의 형식을 지정한다.
- 단점 : 사용자의 시간대를 알 수 없기 때문에 일광 절약 시간제를 고려할 수 없다는 것이다.
- 사용자가 DST 변경에 걸쳐 있는 날짜로 작업을 시작할 때 잘못된 날짜 계산이 발생할 수 있다.



### 시간대를 올바르게 구성

- 앱에서 시간대 구성을 효과적으로 구성하는 방법을 결정하려면 다수의 사용자가 단일 시간대에 거주하는지 아니면 여러 시간대에 거주하는지 확인해야 한다.
  - Single Time Zone App
    - 모든 사용자가 단일 시간대에 거주하는 경우 이 시간대를 앱의 기본 시간대로 설정하는 것이 좋다.
  - Multiple Time Zone App
    - 울바른 시간대를 사용하여 프로비저닝되도록 하는 여러가지 방법이 있다.
      - 서버 작업이 DateTime 형식에 대해 사용자의 현재 UTC 오프셋을 사용하도록 아무것도 안하는 것이다.
      - 사용자가 자신의 표준 시간대를 수동으로 설정하도록 허용한다.
        - 사용자가 자신의 계정을 관리할 수 있는 양식에 시간대 참조 선택기를 추가한다.
        - 이 방식으로 하면 사용자가 로그아웃했다가 다시 로그인한 후에만 시간대가 적용된다는 점이다.
        - 마이크로플로우를 사용하여 시간대를 자동으로 설정한다. 앱이 몇가지 시간대에서 사용되고 어떤 시가나대를 어떤 사용자에게 할당해야 하는지 자동으로 결정할 수 잇는 경우 정확한 시간을 설정하도록 "after startup" 마이크로플로우를 구성할 수 있다.
- 브라우저의 날짜 표시가 브라우저 시간대와 현지화가 켜져 있는지 여부에 따라 다르다
- 사용자 또는 프로젝트의 시간대는 응용 프로그램 서버에서 날짜를 처리할 때 적용된다.



### Localize가 No일때 

- No를 누르게 되면 현지화되지 않고 사용자는 클라이언트에서 항상 UTC 값을 볼 수 있다.
- 위치가 명확할 때 모든 곳에서 동일한 날짜와 시간을 표시하는 것이 더 읽기 쉽다.
- 날짜와 시간이 사용자에게 현지화된 경우 혼동을 일으킬 수도 있다.



