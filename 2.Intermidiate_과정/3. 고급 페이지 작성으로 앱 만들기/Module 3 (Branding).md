# Module 3 (Branding)



### 사용자 지정 스타일을 추가할 때 3가지 옵션

- Mendix Studio에서 테마 사용자 정의
- SASS 변수를 변경하여 스타일 추가
- 사용자 정의 레이어에 새로운 스타일 추가



### 목표

- Sass 변수를 변경하고 CSS로 컴파일하여 기업 브랜딩과 일치하도록 앱 테마를 업데이트한다.
- 일반 네비게이션 메뉴를 표시하고 사용자가 상단 표시줄과 중요한 정보를 표시하는 동적 헤더에서 로그아웃할 수 있도록 하는 사용자 정의 네비게이션 레이아웃을 빌드한다.
- 사용자가 새 계정을 만들거나 기존 계정으로 로그인할 수 있는 사용자 지정 로그인 페이지를 만든다.



#### Studio Pro에서 작업한 프로젝트를 Studio에서 여는 방법

- 탑메뉴에서 Version Control을 클릭하고 Manage Branch lines를 클릭한다.
- 창이 뜨면 가운데의 Disable for Mendix Studio를 클릭한다.
- Studio로 가서 프로젝트를 연다.



### 사용자 정의 네비게이션 레이아웃

- Atlas UI는 기본적으로 3가지 네비게이션 레이아웃이 있다.

  - Atlas Default (사이드바에 네비게이션 메뉴 포함)
  - Atlas Topbar (Topbar에 네비게이션 메뉴 포함)
  - 팝업 (일반 페이지 대신 팝업 페이지)

- 스크롤 컨테이너

  - 레이아웃을 개별 영역으로 나누고 해당 영역에 대한 스크롤 동작을 설정할 수 있다.
  - 유일한 최상위 위젯이어야 한다.
  - 스크롤 컨테이너는 다른 위젯 안으로 들어갈 수 없다.

- 컨텐츠

- Placeholders

  - 레이아웃을 사용하는 모든 페이지의 캔버스를 형성하는 빈 영역

- 마스터 레이아웃

  - 레이아웃은 다른 레이아웃을 기반으로 할 수 있다. (상위 레이아웃이 마스터 레이아웃)
  - 사이드 바를 추가하는 경우 페이지는 마스터 레이아웃 또는 파생 레이아웃을 기반으로 할 수 있으며 마스터 레이아웃에 대한 변경 사항이 반영된다.
  - 마스터 레이아웃을 통해 재사용을 활용하면 **DRY (Don’t Repeat Yourself)** 원칙을 프로젝트에 통합하여 이미 생성한 요소의 중복을 줄일 수 있다.
  - 레이아웃 체인은 필요한 만큼 길어질 수 있지만 UX 디자인 관행과 단순성의 가치를 유지하기 위해 최대 3개를 권장한다.

  

- 만드는 방법

  1. 새 레이아웃을 만든다

     - App Explorer에서 Expenses 모듈의 Resources 폴더를 마우스 오른쪽 클릭하여 Add others에서 레이아웃을 선택한다.
     - 새 레이아웃 이름을 정해준다.
     - 확인을 누른다.

  2. 새 레이아웃이 자동으로 열린다.

  3. 속성 창에서 마스터 레이아웃을 Atlas_TopBar로 설정한다.

     - 앱의 모든 위치에 2가지를 표시하는 동적 헤더를 추가할 것이다.

       - 일반 직원의 경우 : 요청한 총 금액과 승인된 금액.

       - 재무 직원의 경우 : 모든 직원이 요청한 금액과 승인된 금액.

     - 헤더를 통해 직원은 새로운 비용 추가 버튼을 눌러 새 요청을 생성할 수 있다.

     - 동적 데이터를 네비게이션 레이아웃에 직접 추가할 수 없다.

       - 데이터를 표시하는 스니펫을 사용하면 가능하다.

  4. 헤더를 위한 공간을 만들려면 레이아웃에 상단 영역을 추가해야 한다.

     - 스크롤 컨테이너를 클릭하면 나타나는 Add top region을 눌러주면 된다.

  5. 홈 페이지를 연다.

     - 새로 만든 Atlas_Custom 레이아웃을 홈 페이지의 레이아웃으로 설정한다.





### 사용자 정의 로그인 페이지

- 모든 Mendix 앱에는 기본 로그인 페이지가 있다.

- 로그인 페이지를 변경하는 방법 2가지

  - 사용자 정의 login.html 파일 만들기
    - 장점
      - 익명 사용자를 허용할 필요가 없으므로 매우 안전한 옵션이다.
      - Mendix 앱은 로그인 후 로드되어 앱의 보안을 다시 추가한다.
    - 단점
      - HTML을 작성할 수 있어야한다.
  - 기본 제공 사용자 정의 로그인 페이지 사용
    - 장점 
      - 사용하기 쉽다
      - HTML 작성법을 알 필요가 없다
    - 단점
      - 익명 사용자를 허용해야 한다.
      - 전체 Mendix 앱은 로그인하기 전에 로드 된다.

- #### 로그인 페이지 설정

  1.  익명 사용자가 App Security내에서 앱에 액세스할 수 있도록 허용한다.
     - Anonymous 라는 새 사용자 Role을 만든다.
     - Expense 모듈에서도 Anonymous라는 새 모듈 Role을 만든다.
     - 사용자 role과 모듈 role이 연결되어 있는지 확인한다.
     - App Security에서 익명 사용자 탭을 열고 users를 yes로 하고 role을 만든 Anonymous로 설정하고 확인을 누른다.
  2.  Resources 폴더에 새 레이아웃을 만든다. (Atlas_Login이라고 이름을 정한다.)
  3.  새 페이지를 만드는데 템플릿을 Form login으로 하고 레이아웃도 만든 Atlas_Login으로 한다.
  4.  앱 네비게이션을 열고 새로 생성된 로그인 페이지를 기본 홈 페이지로 설정한다.
  5.  관리자, 요청자, 승인자 role에 대한 역할 기반 홈 페이지를 만든다.
  6.  홈페이지 정하는 섹션 아래 Authentication 섹션에서도 새 로그인 페이지를 로그인 페이지로 설정한다.
  7.  로그인 페이지 디자인을 해준다.
  
  

- #### 익명 사용자의 등록 허용

  - 계정이 없는 직원도 직접 만들 수 있도록 하려한다.
  - 익명의 사용자는 어떤 데이터도 액세스 할 수 없다.
  - 회사 직원들만 가입할 수 있는지 확인한다.
  - 가입 후 직원은 로그인 페이지로 돌아가서 로그인 할 수 있다.
  - 하는 방법
    1. Microflows라는 이름으로 Anonymous Users폴더에 하위 폴더로 만든다.
    2. Registration라는 이름의 엔티티를 도메인 모델에 만든다.
       - 객체의 정보가 데이터베이스의 계정으로 저장되기 전에 계정 객체에 복사될 것이기 때문에 이 엔티티는 non-persistable이다.
       - 속성으로 회원가입때 입력할 내용들을 넣는다.
       - 엔티티에 대해 익명 사용자에게 권한을 준다.
    3. 로그인 페이지에 가입 버튼을 만든다.
       - 회원가입 페이지를 만든다
       - 익명 사용자에게 페이지 액세스 권한을 준다.
    4. 회원가입 페이지를 열고 암호 필드의 속성을 암호로 표시하기로 설정한다.
       - Save 버튼의 이름을 Create my account로 바꾼다
    5. Create my account버튼을 누르면 마이크로플로우가 호출되게 설정한다.

