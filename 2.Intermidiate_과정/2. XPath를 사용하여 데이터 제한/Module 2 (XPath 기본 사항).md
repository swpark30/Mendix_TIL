# Module 2 (XPath 기본 사항)



### XPath(XML Path Language) 란?

- XML 문서의 특정 요소나 속성에 접근하기 위한 경로를 지정하는 언어
- XML 문서를 탐색하기 위해 경로 표현식 (path expression)을 사용
- 수학, 문자열 처리 등을 하기 위한 표준 함수 라이브러리를 내장



### 왜 XPath를 사용하는지

- Mendix가 데이터와 상호작용할 때 도메인 모델을 탐색하는데 사용하는 언어이다.
- 개발자가 보고 싶은 데이터에 대해 구체적으로 알 수 있는 서면 방법을 제공한다.
- 엔티티, 속성, 연결, 변수를 사용하여 데이터를 제한하는 방법을 제공한다.
- 데이터 속성 간의 관계를 지정하는 구문이다.
- 데이터베이스 보편성과 사용 용이성 때문에 SQL이나 OQL보다 XPath를 사용한다.
- 도메인 모델의 연결 및 속성 구조와 잘 맞으므로 쿼리를 한 눈에 이해할 수 있다.



### User stories 

- 회사에 휴가 요청을 제출, 검토 및 승인할 수 있는 방법이 필요하다.
- 직원은 이러한 요청을 생성하고 관리자는 부하 직원의 요청을 승인할 수 있다.
- 안전한 데이터는 매우 중요하므로 직원이 지신의 요청만 볼 수 있도록 해야한다.
- 관리자는 부하 직원의 요청만 관리할 수 있어야한다.
- 관리자는 모든 직원 및 관리자의 요청을 볼 수 있으며 각 요청을 승인할 책임이 있는 관리자를 할당할 책임이 있다.



### 어디에서 XPath를 사용하는지

- XPath는 Mendix 플랫폼 전체에서 데이터베이스의 데이터 흐름을 제어하는데 사용된다.

- 데이터베이스에서 데이터를 검색하는 거의 모든 위치에서 XPath 쿼리를 활용할 수 있다.

- 대부분 XPath Constraint라는 창에 작성한다.

  

- #### 페이지의 XPath

  - Data grid 나 List view와 같은 List 위젯에 대한 제약 조건을 통해 표시할 항목을 정할 수 있다.
  - Reference Selectors의 제약 조건을 통해 사용자에게 표시되는 Selectable objects을 정할 수 있다.
    - ex) Reference Selectors를 사용하여 주문에 대한 제품을 선택할 때 XPath 제약 조건을 사용하여 특정 제품만 목록에 표시되도록 할 수 있다.

- #### 마이크로플로우의 XPath

  - 데이터베이스에서 리턴되는 데이터를 정하기위해 retrieve의 마이크로플로우에서 사용 된다.

- #### 보안의 XPath

  - 도메인 모델 보안 구성의 엔티티 액세스 규칙에 추가할 수 있다.
  - userRole마다 가져올 수 있는 데이터 값을 제한해서 원하는 데이터만 받을 수 있게 할 수 있다.
  
  



### XPath를 구성하는 방법

- 도메인 모델을 직접 참조하며 엔티티, 속성, 연결을 직접 참조할 수 있다.
- 토큰
  - //
    - 데이터베이스 activity 또는 List 위젯에서 검색을 위해 선택된 엔티티
  - []
    - XPath 제약 조건은 항상 대괄호 사이에 작성된다.
  - /
    - 새 노드로 이동할 때마다 슬래시가 사용된다
    - 연결에서 엔티티로 엔티티에서 속성이나 연결로 이동할 때 사용된다.
  - ()
    - 우선순위를 나타내기 위해 그룹화 할 수 있다.





